# EventGo - Система продажи билетов на мероприятия

Полнофункциональная система продажи билетов на Laravel с админ-панелью, системой оплаты, промокодами и отправкой чеков.

## Возможности

✅ **Система билетов**
- Обычные и VIP билеты с разными ценами
- Управление количеством доступных билетов
- Красивый интерфейс выбора билетов

✅ **Система оплаты**
- Оплата через QR код
- Оплата через СБП (Система быстрых платежей)
- Расчетный счет ВТБ
- Автоматическая генерация QR кодов

✅ **Промокоды и скидки**
- Процентные скидки
- Фиксированные скидки
- Ограничение по количеству использований
- Срок действия промокодов

✅ **Анкета покупателя**
- Фамилия и имя
- Номер телефона
- Электронная почта
- Вид деятельности (Подолог, Эстетист, Руководитель)
- Согласие на обработку персональных данных

✅ **Отправка чеков**
- Автоматическая отправка чека на email после оплаты
- Красивый HTML чек с полной информацией о заказе

✅ **Админ-панель**
- Просмотр всех заказов
- Просмотр покупателей с фильтрацией
- Управление билетами
- Управление промокодами
- Статистика и аналитика

✅ **Дизайн**
- Современный и красивый дизайн
- Полностью адаптивная верстка для мобильных устройств
- Таймер обратного отсчета до мероприятия

## Требования

- PHP >= 8.2
- Composer
- MySQL/PostgreSQL/SQLite
- Node.js и NPM (для фронтенда, опционально)

## Установка

1. **Клонируйте репозиторий или скопируйте файлы проекта**

2. **Установите зависимости:**
```bash
composer install
```

3. **Создайте файл `.env`:**
```bash
cp .env.example .env
```

4. **Сгенерируйте ключ приложения:**
```bash
php artisan key:generate
```

5. **Настройте базу данных в `.env`:**
```env
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=eventgo
DB_USERNAME=root
DB_PASSWORD=
```

6. **Выполните миграции:**
```bash
php artisan migrate
```

7. **Заполните базу данных тестовыми данными:**
```bash
php artisan db:seed
```

После выполнения seeder будут созданы:
- Администратор: `admin@eventgo.ru` / `admin123`
- 2 билета (обычный и VIP)
- 3 промокода

8. **Настройте почту в `.env`:**
```env
MAIL_MAILER=smtp
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=your_username
MAIL_PASSWORD=your_password
MAIL_FROM_ADDRESS=noreply@eventgo.ru
MAIL_FROM_NAME="EventGo"
```

Для тестирования можно использовать `log` драйвер:
```env
MAIL_MAILER=log
```

9. **Настройте платежные реквизиты в `.env`:**
```env
VTB_ACCOUNT=40702810100000000000
VTB_BIK=044525187
VTB_INN=7702070139
VTB_KPP=770201001
RECIPIENT_NAME="ООО Мероприятие"
```

10. **Настройте дату мероприятия в `.env`:**
```env
EVENT_DATE=2025-12-31 18:00:00
```

11. **Запустите сервер разработки:**
```bash
php artisan serve
```

Откройте браузер и перейдите на `http://localhost:8000`

## Доступ к админ-панели

URL: `http://localhost:8000/admin/login`

**Учетные данные по умолчанию:**
- Email: `admin@eventgo.ru`
- Пароль: `admin123`

⚠️ **Важно:** После первого входа измените пароль администратора!

## Структура проекта

```
app/
├── Http/
│   └── Controllers/
│       ├── AdminController.php      # Контроллер админ-панели
│       ├── AdminAuthController.php  # Авторизация админа
│       ├── OrderController.php      # Управление заказами
│       ├── PaymentController.php    # Обработка оплаты
│       ├── PromoCodeController.php  # API для промокодов
│       └── mainController.php       # Главная страница
├── Models/
│   ├── Admin.php                    # Модель администратора
│   ├── Customer.php                 # Модель покупателя
│   ├── Order.php                    # Модель заказа
│   ├── PromoCode.php                # Модель промокода
│   └── Ticket.php                   # Модель билета

resources/
└── views/
    ├── admin/                       # Представления админ-панели
    ├── emails/                      # Шаблоны писем
    ├── order/                       # Страницы заказов
    ├── payment/                     # Страницы оплаты
    └── receipt/                     # Шаблоны чеков

database/
├── migrations/                     # Миграции базы данных
└── seeders/
    └── DatabaseSeeder.php           # Seeder с тестовыми данными
```

## API

### Проверка промокода

**GET** `/api/promo-code/check?code=WELCOME10`

**Ответ:**
```json
{
    "valid": true,
    "promo_code": {
        "id": 1,
        "code": "WELCOME10",
        "discount_type": "percentage",
        "discount_value": "10.00"
    },
    "discount_type": "percentage",
    "discount_value": "10.00"
}
```

## Настройка платежей

### ВТБ Банк

В файле `.env` укажите реквизиты вашего расчетного счета:

```env
VTB_ACCOUNT=ваш_расчетный_счет
VTB_BIK=044525187
VTB_INN=ваш_инн
VTB_KPP=ваш_кпп
RECIPIENT_NAME="Название вашей организации"
```

QR код генерируется автоматически на основе этих данных.

## Производственное развертывание

1. Установите `APP_ENV=production` и `APP_DEBUG=false` в `.env`
2. Выполните `php artisan config:cache`
3. Выполните `php artisan route:cache`
4. Выполните `php artisan view:cache`
5. Настройте веб-сервер (Nginx/Apache) для работы с Laravel
6. Настройте SSL сертификат
7. Настройте реальный SMTP сервер для отправки писем

## Безопасность

- Все пароли хешируются с использованием bcrypt
- CSRF защита включена для всех форм
- Валидация всех входных данных
- Защита админ-панели через middleware

## Лицензия

MIT License

## Поддержка

При возникновении проблем создайте issue в репозитории проекта.

---

**Разработано с ❤️ для EventGo**
